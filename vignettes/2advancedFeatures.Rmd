---
title: "More arguments than just a PEP in your function?"
author: "Michal Stolarczyk"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Introduction

Before you start see the [Getting started with `BiocProject` vignette](./1getStarted.html) for the basic information and installation instructions.

# Additional arguments in your function

**What if your custom data processing function requires more arguments than just a PEP?**

For reference consider the `parseEncodeRegions_resize.R` function and its interface. This function additionally requires the `resize.width` argument. 
```{r echo=FALSE, eval=TRUE, comment=""}
processFunction =  system.file(
  "extdata",
  "example_peps-master",
  "example_BiocProject",
  "parseEncodeRegions_resize.R",
  package="BiocProject"
)
source(processFunction)
parseEncodeRegions_resize
```

There are a few ways to enable your function to get multiple arguments - not just a PEP ([`pepr::Project`](http://code.databio.org/pepr/reference/Project-class.html)) object, which is the basic scenariopkgd.

# How to use the `funcArgs` argument

Provide additional `funcArgs` argument to the `BiocProject` function. This argument has to be a named list. The names have to correspond to the argument names of your function. **The PEP (`pepr::Project` object)  will be passed to your function by default**. For example:

Get paths to the files used in this vignette
```{r echo=T,message=FALSE}
library(BiocProject)
ProjectConfigArgs = system.file(
  "extdata",
  "example_peps-master",
  "example_BiocProject",
  "project_config_resize.yaml",
  package = "BiocProject"
)

processFunctionArgs =  system.file(
  "extdata",
  "example_peps-master",
  "example_BiocProject",
  "parseEncodeRegions_resize.R",
  package = "BiocProject"
)
```
Read the function into R environment and create the `BiocProject` object 
```{r}
source(processFunctionArgs)
bpArgs =  BiocProject(file=ProjectConfigArgs, funcArgs=list(resize.width=100))
```
The `funcArgs` argument gets a one element list and passes the `resize.width` argument to your custom data processing function.


# How to use a lambda (anonymous) function

You can use a [lambda function](https://en.wikipedia.org/wiki/Anonymous_function) (that is implemented in the `BiocProject` function call) to provide additional arguments to your function of interest. For example:

```{r}
bpLambda = BiocProject(file=ProjectConfigArgs, func=function(x){
      parseEncodeRegions_resize(project=x, resize.width=100)
    }
  )
#Inspect it
bpLambda
```



