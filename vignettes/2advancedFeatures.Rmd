---
title: "Advanced features of BiocProject"
author: "Michal Stolarczyk"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Introduction

See this [vignette](./1getStarted.html) for the basic `BiocProject` information and installation instructions.

# Advanced features

## Additional arguments in your function

There are a few ways to to enable your function to get multiple arguments. Not just a PEP ([`pepr::Project`](http://code.databio.org/pepr/reference/Project-class.html) object, which is the basic scenario).

1. **Use `funcArgs` argument**

Provide addtional `funcArgs` argument to the `BiocProject` function. This argument has to be a named list. The names have to correspond to the argument names of your function. Please note that the PEP (`pepr::Project`) object will be passed to your function by default. For example:

Get paths to the files used in this vignette
```{r echo=T,message=FALSE}
library(BiocProject)
ProjectConfigArgs = system.file(
  "extdata",
  "example_peps-master",
  "example_BiocProject",
  "project_config_args.yaml",
  package = "BiocProject"
)

processFunctionArgs =  system.file(
  "extdata",
  "example_peps-master",
  "example_BiocProject",
  "parseEncodeRegions_args.R",
  package = "BiocProject"
)
```
Read the function into R envirionment and create the `BiocProject` object 
```{r}
source(processFunctionArgs)
bpArgs =  BiocProject(file=ProjectConfigArgs, funcArgs=list(arg1="TEST1",arg2="TEST2"))
```
Note that the strings `"TEST1"` and `"TEST2"` which were passed as arguments were printed as it was implemented in the `parseEncodeRegions_args.R` function:
```{r echo=FALSE, eval=TRUE, comment=""}
processFunction =  system.file(
  "extdata",
  "example_peps-master",
  "example_BiocProject",
  "parseEncodeRegions_args.R",
  package = "BiocProject"
)
source(processFunction)
parseEncodeRegions_args
```


2. **Use lambda (anonymous) function**

You can use a [lambda function](https://en.wikipedia.org/wiki/Anonymous_function) (that is implemented in the `BiocProject` function call) to provide additional arguments to your function of interest. For example:

```{r}
bpLambda = BiocProject(file=ProjectConfigArgs, func=function(x){parseEncodeRegions_args(x,"TEST1","TEST2")})
#Inspect it
bpLambda
```

## Creation of an empty `BiocProject` object

If you need to create an empty `BiocProject` obhect set the `autoLoad` argument to `FALSE` and using the function from the config YAML will be suppressed (`autoLoad` is set to `TRUE` bey default). For example:

```{r}
bpEmpty =  BiocProject(file=ProjectConfigArgs, autoLoad=FALSE)
#Inspect it
bpEmpty
```



## Use functions implemented elsewhere 

You can use functions implemented in other R packages. In order to do it specify the name of the function and its source in the config YAML, like:

```
bioconductor:
  read_fun_name: packageName::function
```


